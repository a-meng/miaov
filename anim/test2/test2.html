<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>js动画练习</title>
    <!--http://www.imooc.com/course/comment/id/659?page=22 练习-->
    <style>
        #anim1 {
            width: 120px;
            height: 90px;
            background-repeat: no-repeat;
        }

        #anim2 {
            width: 130px;
            height: 130px;
            background-repeat: no-repeat;
        }
    </style>
</head>
<body>
<div id="anim1"></div>
<div id="anim2"></div>
<script src="loadImage.js"></script>
<script src="TimeLine.js"></script>
<script>
    let src_list=['rabbit-big.png', 'miao.png'];
    Promise.all(loadImage(src_list)).then(function (res) {
        console.info(res);
        anim1(src_list[0]);
        anim2(src_list[1]);
    });

    function anim1(src) {
        let node = document.querySelector('#anim1');
        let step = 0;
        node.style.backgroundImage = `url(${src})`;
        let timeLine = new TimeLine(function () {
            node.style.backgroundPosition = `-${step * 175}px 0`;
            step = step >= 5 ? 0 : step + 1;
        }, 1000 / 12);
        timeLine.start();
    }

    function anim2(src) {
        let node = document.querySelector('#anim2');
        let step = 0;
        node.style.backgroundImage = `url(${src})`;
        let timeLine = new TimeLine(function () {
            let rowIndex = parseInt(step / 3);
            let colIndex = (step ) % 3;
            node.style.backgroundPosition = `-${colIndex * 130}px -${rowIndex * 130}px`;
            step = step >= 8 ? 0 : step + 1;
        }, 1000 / 6);
        timeLine.start();
    }


</script>
</body>
</html>