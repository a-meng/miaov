<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>上下滑动</title>
    <style>
        ul {
            margin-top: 0;
        }

        .scroll {
            width: 200px;
            height: 400px;

            overflow: hidden;
            position: relative;

            border: 1px solid #ddd;
            margin: 20px auto;
        }

        .scroll-contain {
            padding-right: 10px;
        }

        .scroll-slider {
            position: absolute;
            right: 0;
            top: 0;
            width: 5px;
            height: 50px;
            border: 1px solid #fff;
            background: #ddd;
            border-radius: 3px;
        }
    </style>
</head>
<body>
<div class="scroll">
    <div class="scroll-contain"></div>
    <div class="scroll-slider"></div>
</div>
<script src="jquery2.1.js"></script>
<script>
    document.addEventListener('touchmove', function (e) {
        e.preventDefault();
    });
    $(function () {
        var $scroll = $('.scroll');
        var $contain = $('.scroll-contain');
        var $slider = $('.scroll-slider');
        var contain_H = $contain.height(), scroll_H = $scroll.height();
        $contain[0].style.marginTop = 0;
        //内容上下滚动
        var touchY, top, speedY, pageY; //touchstart的Y坐标，$contain的marginTop,手指离开瞬间的速度
        var bufInterval;//缓冲动画
        $scroll.on('touchstart', function (e) {

            var ev = e.originalEvent.touches[0];
            touchY = ev.pageY;
            top = parseInt($contain[0].style.marginTop);
            pageY = ev.pageY;
        });
        $scroll.on('touchmove', function (e) {
            var ev = e.originalEvent.touches[0];
            var away = touchY - ev.pageY;
            var newtop = top - away;

            if (-(contain_H - scroll_H) < newtop && newtop < 1) {
                $contain[0].style.marginTop = (top - away) + 'px';
                speedY = ev.pageY - pageY;
                pageY = ev.pageY;
            }
        });
        $scroll.on('touchend', function (e) {
            var ev = e.originalEvent.changedTouches[0];
            //根据最后瞬间速度 让$contain有个缓冲效果
            console.info(speedY);
            clearInterval(bufInterval);
            bufInterval = setInterval(function () {
                var old = parseInt($contain[0].style.marginTop);
                if (Math.abs(speedY) > 1 && -(contain_H - scroll_H) < old && old < 1) {
                    speedY = speedY * 0.9;
                    $contain[0].style.marginTop = (old + speedY * 1.5) + 'px';
                } else {
                    clearInterval(bufInterval);
                }
            }, 20);
        });


    });

    //$contain内填充一点内容 方便演示
    var contain_html = '<ul>';
    for (var i = 0; i < 100; i++) {
        contain_html += '<li>' + i + i + '</li>'
    }
    contain_html += '</ul>';
    $('.scroll-contain').html(contain_html);
</script>
</body>
</html>